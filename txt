1. build.gradle (Nivel de Proyecto)
Este archivo va en la carpeta raíz de tu proyecto.





// build.gradle (Project)

// Top-level build file where you can add configuration options common to all sub-projects/modules.

buildscript {
        ext {
                    kotlin_version = '1.9.0' // O la versión de Kotlin que estés usando
        }
            repositories {
                        google()
                                mavenCentral()
            }
                dependencies {
                            classpath 'com.android.tools.build:gradle:8.1.0' // O la versión de Gradle Plugin que uses
                                    classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
                                            // NOTE: Do not place your application dependencies here; they belong
                                                    // in the individual module build.gradle files
                }
}

allprojects {
        repositories {
                    google()
                            mavenCentral()
        }
}

        }
}
                }
            }
        }
}


2. settings.gradle
Este archivo también va en la carpeta raíz de tu proyecto.






// settings.gradle

pluginManagement {
    repositories {
            google()
                    mavenCentral()
                            gradlePluginPortal()
                                }
                                }
                                dependencyResolutionManagement {
                                    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)
                                        repositories {
                                                google()
                                                        mavenCentral()
                                                            }
                                                            }
                                                            rootProject.name = "marcosvazques20"
                                                            include ':app'




                            3. app/build.gradle.kts (Nivel de Módulo)
                            Este archivo va dentro de la carpeta app de tu proyecto.







                            // app/build.gradle.kts

                            plugins {
                                id("com.android.application")
                                    id("org.jetbrains.kotlin.android")
                                    }

                                    android {
                                        namespace = "com.marcosvazques20"
                                            compileSdk = 34 // Asegúrate de que esta sea la versión de SDK que quieres usar

                                                defaultConfig {
                                                        applicationId = "com.marcosvazques20"
                                                                minSdk = 24 // Puedes ajustar esto según tus necesidades
                                                                        targetSdk = 34 // Debe ser igual a compileSdk
                                                                                versionCode = 1
                                                                                        versionName = "1.0"

                                                                                                testInstrumentationRunner = "androidx.test.runner.AndroidJUnitRunner"
                                                                                                    }

                                                                                                        buildTypes {
                                                                                                                release {
                                                                                                                            isMinifyEnabled = false
                                                                                                                                        proguardFiles(getDefaultProguardFile("proguard-android-optimize.txt"), "proguard-rules.pro")
                                                                                                                                                }
                                                                                                                                                    }
                                                                                                                                                        compileOptions {
                                                                                                                                                                sourceCompatibility = JavaVersion.VERSION_1_8
                                                                                                                                                                        targetCompatibility = JavaVersion.VERSION_1_8
                                                                                                                                                                            }
                                                                                                                                                                                kotlinOptions {
                                                                                                                                                                                        jvmTarget = "1.8"
                                                                                                                                                                                            }
                                                                                                                                                                                            }

                                                                                                                                                                                            dependencies {
                                                                                                                                                                                                implementation("androidx.core:core-ktx:1.12.0") // Añadida, es común en proyectos Kotlin
                                                                                                                                                                                                    implementation("androidx.appcompat:appcompat:1.6.1")
                                                                                                                                                                                                        implementation("com.google.android.material:material:1.11.0")
                                                                                                                                                                                                            implementation("androidx.constraintlayout:constraintlayout:2.1.4")

                                                                                                                                                                                                                // ML Kit para OCR (Incluye Japonés)
                                                                                                                                                                                                                    implementation("com.google.mlkit:text-recognition-japanese:16.0.0")

                                                                                                                                                                                                                        // Dependencia para Text-to-Speech (TTS)
                                                                                                                                                                                                                            // TTS es parte del SDK de Android, no requiere una dependencia Gradle adicional

                                                                                                                                                                                                                                testImplementation("junit:junit:4.13.2")
                                                                                                                                                                                                                                    androidTestImplementation("androidx.test.ext:junit:1.1.5")
                                                                                                                                                                                                                                        androidTestImplementation("androidx.test.espresso:espresso-core:3.5.1")
                                                                                                                                                                                                                                        }






       4. app/src/main/AndroidManifest.xml
       Este es el manifiesto de tu aplicación.







       <!-- app/src/main/AndroidManifest.xml -->

       <?xml version="1.0" encoding="utf-8"?>
       <manifest xmlns:android="http://schemas.android.com/apk/res/android"
           xmlns:tools="http://schemas.android.com/tools">

               <!-- Permisos necesarios para tu aplicación -->
                   <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
                       <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
                           <!-- Si tu app va a acceder a internet para DeepL, aunque el Intent lo abre en navegador/app externa -->
                               <uses-permission android:name="android.permission.INTERNET" />

                                   <application
                                           android:allowBackup="true"
                                                   android:dataExtractionRules="@xml/data_extraction_rules"
                                                           android:fullBackupContent="@xml/backup_rules"
                                                                   android:icon="@mipmap/ic_launcher"
                                                                           android:label="@string/app_name"
                                                                                   android:roundIcon="@mipmap/ic_launcher_round"
                                                                                           android:supportsRtl="true"
                                                                                                   android:theme="@style/Theme.Marcosvazques20">
                                                                                                           <activity
                                                                                                                       android:name=".MainActivity"
                                                                                                                                   android:exported="true">
                                                                                                                                               <intent-filter>
                                                                                                                                                               <action android:name="android.intent.action.MAIN" />
                                                                                                                                                                               <category android:name="android.intent.category.LAUNCHER" />
                                                                                                                                                                                           </intent-filter>
                                                                                                                                                                                                   </activity>
                                                                                                                                                                                                       </application>

                                                                                                                                                                                                       </manifest>








       5. app/src/main/java/com/marcosvazques20/MainActivity.kt
       Este es el código fuente principal de tu actividad.









       // app/src/main/java/com/marcosvazques20/MainActivity.kt

       package com.marcosvazques20

       import android.content.ClipData
       import android.content.ClipboardManager
       import android.content.Context
       import android.content.Intent
       import android.graphics.*
       import android.graphics.pdf.PdfRenderer
       import android.net.Uri
       import android.os.Bundle
       import android.os.ParcelFileDescriptor
       import android.speech.tts.TextToSpeech
       import android.view.ActionMode
       import android.view.Menu
       import android.view.MenuItem
       import android.view.MotionEvent
       import android.view.View
       import android.widget.Button
       import android.widget.ImageView
       import android.widget.Switch
       import android.widget.TextView
       import android.widget.Toast
       import androidx.appcompat.app.AppCompatActivity
       import androidx.activity.result.contract.ActivityResultContracts
       import com.google.mlkit.vision.common.InputImage
       import com.google.mlkit.vision.text.Text
       import com.google.mlkit.vision.text.TextRecognition
       import com.google.mlkit.vision.text.japanese.JapaneseTextRecognizerOptions
       import java.io.File
       import java.util.*

       class MainActivity : AppCompatActivity(), TextToSpeech.OnInitListener {

           private var renderer: PdfRenderer? = null
               private var indicePaginaActual = 0
                   private var totalPaginas = 0
                       private var textoSeleccionado = ""
                           private var bloquesDetectados: List<Text.Block> = listOf()
                               private lateinit var tts: TextToSpeech

                                   private val selectorPdf = registerForActivityResult(ActivityResultContracts.GetContent()) { uri ->
                                           uri?.let { prepararPdf(it) }
                                               }

                                                   override fun onCreate(savedInstanceState: Bundle?) {
                                                           super.onCreate(savedInstanceState)
                                                                   setContentView(R.layout.activity_main)

                                                                           tts = TextToSpeech(this, this)

                                                                                   findViewById<Button>(R.id.btnSiguiente).setOnClickListener { cambiarPagina(1) }
                                                                                           findViewById<Button>(R.id.btnAnterior).setOnClickListener { cambiarPagina(-1) }
                                                                                                   findViewById<View>(R.id.btnAbrirPdf).setOnClickListener { selectorPdf.launch("application/pdf") }

                                                                                                           findViewById<Switch>(R.id.switchOscuro).setOnCheckedChangeListener { _, isChecked ->
                                                                                                                       aplicarFiltroOscuro(isChecked)
                                                                                                                               }

                                                                                                                                       configurarToqueOverlay()
                                                                                                                                           }

                                                                                                                                               private fun prepararPdf(uri: Uri) {
                                                                                                                                                       val file = File(cacheDir, "temp.pdf")
                                                                                                                                                               contentResolver.openInputStream(uri)?.use { input -> file.outputStream().use { input.copyTo(it) } }
                                                                                                                                                                       val pfd = ParcelFileDescriptor.open(file, ParcelFileDescriptor.MODE_READ_ONLY)
                                                                                                                                                                               renderer = PdfRenderer(pfd)
                                                                                                                                                                                       totalPaginas = renderer!!.pageCount
                                                                                                                                                                                               indicePaginaActual = 0
                                                                                                                                                                                                       mostrarPagina()
                                                                                                                                                                                                           }

                                                                                                                                                                                                               private fun mostrarPagina() {
                                                                                                                                                                                                                       renderer?.let {
                                                                                                                                                                                                                                   val pagina = it.openPage(indicePaginaActual)
                                                                                                                                                                                                                                               val bitmap = Bitmap.createBitmap(pagina.width, pagina.height, Bitmap.Config.ARGB_8888)
                                                                                                                                                                                                                                                           pagina.render(bitmap, null, null, PdfRenderer.Page.RENDER_MODE_FOR_DISPLAY)

                                                                                                                                                                                                                                                                       findViewById<ImageView>(R.id.pdfImageView).setImageBitmap(bitmap)
                                                                                                                                                                                                                                                                                   findViewById<TextView>(R.id.txtPagina).text = "${indicePaginaActual + 1} / $totalPaginas"

                                                                                                                                                                                                                                                                                               procesarOCR(bitmap)
                                                                                                                                                                                                                                                                                                           pagina.close()
                                                                                                                                                                                                                                                                                                                   }
                                                                                                                                                                                                                                                                                                                       }

                                                                                                                                                                                                                                                                                                                           private fun procesarOCR(bitmap: Bitmap) {
                                                                                                                                                                                                                                                                                                                                   val recognizer = TextRecognition.getClient(JapaneseTextRecognizerOptions.Builder().build())
                                                                                                                                                                                                                                                                                                                                           recognizer.process(InputImage.fromBitmap(bitmap, 0))
                                                                                                                                                                                                                                                                                                                                                       .addOnSuccessListener { visionText ->
                                                                                                                                                                                                                                                                                                                                                                       bloquesDetectados = visionText.textBlocks
                                                                                                                                                                                                                                                                                                                                                                                   }
                                                                                                                                                                                                                                                                                                                                                                                       }

                                                                                                                                                                                                                                                                                                                                                                                           private fun configurarToqueOverlay() {
                                                                                                                                                                                                                                                                                                                                                                                                   findViewById<View>(R.id.overlayView).setOnTouchListener { _, event ->
                                                                                                                                                                                                                                                                                                                                                                                                               if (event.action == MotionEvent.ACTION_DOWN) {
                                                                                                                                                                                                                                                                                                                                                                                                                               val bloque = bloquesDetectados.find { it.boundingBox?.contains(event.x.toInt(), event.y.toInt()) == true }
                                                                                                                                                                                                                                                                                                                                                                                                                                               bloque?.let { lanzarMenu(it.text) }
                                                                                                                                                                                                                                                                                                                                                                                                                                                           }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                       true
                                                                                                                                                                                                                                                                                                                                                                                                                                                                               }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       private fun lanzarMenu(texto: String) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               textoSeleccionado = texto
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       startActionMode(object : ActionMode.Callback {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   override fun onCreateActionMode(mode: ActionMode?, menu: Menu?): Boolean {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   mode?.menuInflater?.inflate(R.menu.menu_seleccion_pdf, menu)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   return true
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           override fun onActionItemClicked(mode: ActionMode?, item: MenuItem?): Boolean {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           when (item?.itemId) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               R.id.item_copiar -> copiarPortapapeles()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   R.id.item_traducir -> abrirDeepL()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       R.id.item_escuchar -> tts.speak(textoSeleccionado, TextToSpeech.QUEUE_FLUSH, null, null)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       mode?.finish()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       return true
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               override fun onPrepareActionMode(m: ActionMode?, menu: Menu?): Boolean = false
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           override fun onDestroyActionMode(m: ActionMode?) {}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   }, ActionMode.TYPE_FLOATING)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           private fun abrirDeepL() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   val intent = Intent(Intent.ACTION_VIEW, Uri.parse("https://www.deepl.com/translator#any/es/${Uri.encode(textoSeleccionado)}"))
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           startActivity(intent)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   private fun copiarPortapapeles() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           val cb = getSystemService(Context.CLIPBOARD_SERVICE) as ClipboardManager
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   cb.setPrimaryClip(ClipData.newPlainText("PDF", textoSeleccionado))
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           Toast.makeText(this, "Copiado", Toast.LENGTH_SHORT).show()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   private fun aplicarFiltroOscuro(activar: Boolean) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           val iv = findViewById<ImageView>(R.id.pdfImageView)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   if (activar) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               val matrix = ColorMatrix(floatArrayOf(-1f, 0f, 0f, 0f, 255f, 0f, -1f, 0f, 0f, 255f, 0f, 0f, -1f, 0f, 255f, 0f, 0f, 0f, 1f, 0f))
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           iv.colorFilter = ColorMatrixColorFilter(matrix)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       findViewById<View>(R.id.mainLayout).setBackgroundColor(Color.BLACK)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               } else {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           iv.colorFilter = null
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       findViewById<View>(R.id.mainLayout).setBackgroundColor(Color.WHITE)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       private fun cambiarPagina(delta: Int) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               if (indicePaginaActual + delta in 0 until totalPaginas) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           indicePaginaActual += delta
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       mostrarPagina()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       override fun onInit(s: Int) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               tts.language = Locale.JAPANESE
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       override fun onDestroy() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               if (::tts.isInitialized) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           tts.stop()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       tts.shutdown()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       super.onDestroy()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           }







                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    6. app/src/main/res/layout/activity_main.xml
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    Este es el archivo de la interfaz de usuario.








                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <!-- app/src/main/res/layout/activity_main.xml -->

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <?xml version="1.0" encoding="utf-8"?>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        xmlns:app="http://schemas.android.com/apk/res-auto"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            xmlns:tools="http://schemas.android.com/tools"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                android:id="@+id/mainLayout"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    android:layout_width="match_parent"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        android:layout_height="match_parent"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            tools:context=".MainActivity">

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ImageView
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        android:id="@+id/pdfImageView"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                android:layout_width="0dp"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        android:layout_height="0dp"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                android:scaleType="fitCenter"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        app:layout_constraintBottom_toTopOf="@+id/linearLayout"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                app:layout_constraintEnd_toEndOf="parent"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        app:layout_constraintStart_toStartOf="parent"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                app:layout_constraintTop_toTopOf="parent"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        tools:srcCompat="@tools:sample/backgrounds/scenic" />

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <!-- Overlay View para detectar toques sobre el PDF -->
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <View
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        android:id="@+id/overlayView"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                android:layout_width="0dp"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        android:layout_height="0dp"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                app:layout_constraintBottom_toTopOf="@+id/linearLayout"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        app:layout_constraintEnd_toEndOf="parent"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                app:layout_constraintStart_toStartOf="parent"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        app:layout_constraintTop_toTopOf="parent" />

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <LinearLayout
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    android:id="@+id/linearLayout"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            android:layout_width="match_parent"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    android:layout_height="wrap_content"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            android:orientation="horizontal"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    android:padding="8dp"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            app:layout_constraintBottom_toBottomOf="parent"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    app:layout_constraintEnd_toEndOf="parent"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            app:layout_constraintStart_toStartOf="parent">

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <Button
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                android:id="@+id/btnAbrirPdf"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            android:layout_width="wrap_content"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        android:layout_height="wrap_content"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    android:text="Abrir PDF" />

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <Button
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        android:id="@+id/btnAnterior"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    android:layout_width="wrap_content"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                android:layout_height="wrap_content"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            android:text="Anterior" />

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <TextView
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                android:id="@+id/txtPagina"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            android:layout_width="0dp"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        android:layout_height="wrap_content"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    android:layout_weight="1"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                android:gravity="center"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            android:text="1 / 1" />

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <Button
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                android:id="@+id/btnSiguiente"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            android:layout_width="wrap_content"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        android:layout_height="wrap_content"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    android:text="Siguiente" />

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <Switch
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        android:id="@+id/switchOscuro"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    android:layout_width="wrap_content"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                android:layout_height="wrap_content"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            android:text="Modo Oscuro" />

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </LinearLayout>

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </androidx.constraintlayout.widget.ConstraintLayout>








                                                                                                                                                                                                                                                         7. app/src/main/res/menu/menu_seleccion_pdf.xml
                                                                                                                                                                                                                                                         Este es el menú contextual que aparece al seleccionar texto.









                                                                                                                                                                                                                                                         <!-- app/src/main/res/menu/menu_seleccion_pdf.xml -->

                                                                                                                                                                                                                                                         <?xml version="1.0" encoding="utf-8"?>
                                                                                                                                                                                                                                                         <menu xmlns:android="http://schemas.android.com/apk/res/android">

                                                                                                                                                                                                                                                             <item
                                                                                                                                                                                                                                                                     android:id="@+id/item_copiar"
                                                                                                                                                                                                                                                                             android:title="Copiar" />

                                                                                                                                                                                                                                                                                 <item
                                                                                                                                                                                                                                                                                         android:id="@+id/item_traducir"
                                                                                                                                                                                                                                                                                                 android:title="Traducir" />

                                                                                                                                                                                                                                                                                                     <item
                                                                                                                                                                                                                                                                                                             android:id="@+id/item_escuchar"
                                                                                                                                                                                                                                                                                                                     android:title="Escuchar" />

                                                                                                                                                                                                                                                                                                                     </menu>










       8. Archivos de Recursos (res/values)
       Estos archivos definen strings, colores y temas.

       app/src/main/res/values/strings.xml






       <?xml version="1.0" encoding="utf-8"?>
       <resources>
           <string name="app_name">marcosvazques20</string>
           </resources>














           app/src/main/res/values/colors.xml








           <?xml version="1.0" encoding="utf-8"?>
           <resources>
               <color name="purple_200">#FFBB86FC</color>
                   <color name="purple_500">#FF6200EE</color>
                       <color name="purple_700">#FF3700B3</color>
                           <color name="teal_200">#FF03DAC5</color>
                               <color name="teal_700">#FF018786</color>
                                   <color name="black">#FF000000</color>
                                       <color name="white">#FFFFFFFF</color>
                                       </resources>
















                                       app/src/main/res/values/themes.xml








                                       <?xml version="1.0" encoding="utf-8"?>
                                       <resources xmlns:tools="http://schemas.android.com/tools">
                                           <!-- Base application theme. -->
                                               <style name="Theme.Marcosvazques20" parent="Theme.MaterialComponents.DayNight.DarkActionBar">
                                                       <!-- Primary brand color. -->
                                                               <item name="colorPrimary">@color/purple_500</item>
                                                                       <item name="colorPrimaryVariant">@color/purple_700</item>
                                                                               <item name="colorOnPrimary">@color/white</item>
                                                                                       <!-- Secondary brand color. -->
                                                                                               <item name="colorSecondary">@color/teal_200</item>
                                                                                                       <item name="colorSecondaryVariant">@color/teal_700</item>
                                                                                                               <item name="colorOnSecondary">@color/black</item>
                                                                                                                       <!-- Status bar color. -->
                                                                                                                               <item name="android:statusBarColor" tools:targetApi="l">?attr/colorPrimaryVariant</item>
                                                                                                                                       <!-- Customize your theme here. -->
                                                                                                                                           </style>
                                                                                                                                           </resources>
                                                                                                                                           
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        